(()=>{var t,e=[];function n(){var t=e.reduce((function(t,e){return t+parseInt(e.value)}),0);document.querySelector("#total").textContent=t}function o(){var t=document.querySelector("#tbody");t.innerHTML="",e.forEach((function(e){var n=document.createElement("tr");n.innerHTML="\n      <td>".concat(e.name,"</td>\n      <td>").concat(e.value,"</td>\n    "),t.appendChild(n)}))}function a(){var n=e.slice().reverse(),o=0,a=n.map((function(t){var e=new Date(t.date);return"".concat(e.getMonth()+1,"/").concat(e.getDate(),"/").concat(e.getFullYear())})),r=n.map((function(t){return o+=parseInt(t.value)}));t&&t.destroy();var c=document.getElementById("myChart").getContext("2d");t=new Chart(c,{type:"line",data:{labels:a,datasets:[{label:"Total Over Time",fill:!0,backgroundColor:"#6666ff",data:r}]}})}function r(t){var r=document.querySelector("#t-name"),c=document.querySelector("#t-amount"),u=document.querySelector(".form .error");if(""!==r.value&&""!==c.value){u.textContent="";var i={name:r.value,value:c.value,date:(new Date).toISOString()};t||(i.value*=-1),e.unshift(i),a(),o(),n(),fetch("/api/transaction",{method:"POST",body:JSON.stringify(i),headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){t.errors?u.textContent="Missing Information":(r.value="",c.value="")})).catch((function(t){console.log("saved to indexedDB",i),saveRecord(i),r.value="",c.value=""}))}else u.textContent="Missing Information"}fetch("/api/transaction").then((function(t){return t.json()})).then((function(t){e=t,n(),o(),a()})),document.querySelector("#add-btn").onclick=function(){r(!0)},document.querySelector("#sub-btn").onclick=function(){r(!1)}})();